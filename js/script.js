const mainBlock=document.querySelector(".game"),typeButtons=mainBlock.querySelectorAll(".js-type-button"),nextButtons=mainBlock.querySelectorAll(".js-next-button"),homeButtons=mainBlock.querySelectorAll(".js-home-icon"),copyButtons=mainBlock.querySelectorAll(".js-copy-icon"),typeBlocks=mainBlock.querySelectorAll(".js-type"),chooseLists=mainBlock.querySelectorAll(".js-choose-list"),needScroll=window.innerWidth<1420;let currentBlock="main",nextBlock="";function scrollToTop(){let e=window.scrollY,t=performance.now();function o(l){let c=l-t,n=Math.min(c/500,1);window.scrollTo(0,e*(1-(n<.5?2*n*n:-1+(4-2*n)*n))),c<500&&requestAnimationFrame(o)}requestAnimationFrame(o)}window.addEventListener("DOMContentLoaded",function(){for(let e of(needScroll&&scrollToTop(),function e(){let t=window.location.href.split("?=type:")[1];if(t){let o=document.querySelector(`#${t}`),l=o.querySelector(".js-copy-icon");l.classList.add("disable"),gsap.to(o,{display:"block"}),gsap.to(o,{opacity:1,duration:1,zIndex:10,delay:.5});let c=window.location.href.split("?=type:")[0];window.history.replaceState(null,"",c)}else gsap.to(".main",{display:"block"}),gsap.to(".main",{opacity:1,duration:1,zIndex:10,delay:.5})}(),chooseLists)){let t=e.querySelectorAll(".js-choose-item");for(let o of t)o.addEventListener("click",()=>{let t=o.querySelector('input[type="radio"]');if(t){let l=e.querySelector(".js-choose-item.active");l&&l!==o&&l.classList.remove("active"),o.classList.contains("active")||o.classList.add("active")}else o.classList.toggle("active")})}for(let l of typeBlocks)l.addEventListener("click",()=>{for(let e of typeButtons)e.setAttribute("data-go-to",l.value)});for(let c of nextButtons)c.addEventListener("click",()=>{if(needScroll&&scrollToTop(),(nextBlock=c.getAttribute("data-go-to")).includes("result")){let e=document.querySelector(`.${nextBlock}`);if(e){let t=e.id,o=window.location.href,l=`${o}?=type:${t}`;window.history.pushState({},"",l)}}n(currentBlock,nextBlock);let r=currentBlock;setTimeout(()=>{gsap.to(`.${r}`,{left:"50%"})},1500),currentBlock=nextBlock,i(nextBlock)});function n(e,t){needScroll?(gsap.to(`.${e}`,{opacity:0,duration:.3,zIndex:0,y:20}),gsap.to(`.${e}`,{display:"none",delay:.5}),gsap.fromTo(`.${t}`,{display:"none"},{display:"block"}),gsap.fromTo(`.${t}`,{opacity:0,y:-20},{opacity:1,duration:.3,zIndex:10,delay:.5,y:0})):(gsap.to(`.${e}`,{left:"-50%",opacity:0,duration:1,zIndex:0}),gsap.to(`.${e}`,{display:"none",delay:.5}),gsap.fromTo(`.${t}`,{display:"none"},{display:"block"}),gsap.fromTo(`.${t}`,{left:"150%",opacity:0},{left:"50%",opacity:1,duration:1,zIndex:10,delay:.5}))}function i(e){let t=document.querySelector(`.${e}`),o=t.querySelectorAll("input"),l=1;for(let c of o)c.addEventListener("input",()=>{c.checked?--l:++l,l>0?gsap.to(`.${e} .game-flex__footer-button`,{disabled:!0}):gsap.to(`.${e} .game-flex__footer-button`,{disabled:!1})})}for(let r of homeButtons)r.addEventListener("click",()=>{needScroll?(scrollToTop(),gsap.to(`.${currentBlock}`,{opacity:0,duration:.3,zIndex:0,y:20}),gsap.to(`.${currentBlock}`,{display:"none",delay:.5}),gsap.to(".main",{display:"block"}),gsap.to(".main",{left:"50%",opacity:1,duration:.3,zIndex:10,delay:.5,y:-20})):(gsap.to(`.${currentBlock}`,{opacity:0,duration:1,zIndex:0}),gsap.to(`.${currentBlock}`,{display:"none",delay:.5}),gsap.to(".main",{display:"block"}),gsap.to(".main",{left:"50%",opacity:1,duration:1,zIndex:10}));let e=mainBlock.querySelectorAll("input:checked");for(let t of e)t.checked=!1;currentBlock="main",nextBlock="",gsap.to(".game-flex__footer-button",{disabled:!0});let o=mainBlock.querySelectorAll(".js-choose-item.active");if(o)for(let l of o)l.classList.remove("active")});for(let a of copyButtons)a.addEventListener("click",e=>{if(e.preventDefault(),!a.classList.contains("active")){let t=window.location.href;navigator.clipboard.writeText(t).then(()=>{a.classList.add("active"),setTimeout(()=>a.classList.remove("active"),2e3)}).catch(e=>{console.error("Ошибка при копировании: ",e)})}})});